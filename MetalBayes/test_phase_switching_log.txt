================================================================================
=== Testing Phase Switching with OptimizerManager ===
================================================================================
【INFO】Using specified device: cpu
【INFO】Initialized TraceAwareKGOptimizer with device: cpu
【INFO】Parameter space: ['metal_a_type', 'metal_a_concentration', 'metal_b_type', 'metal_molar_ratio_b_a']
【INFO】Bounds: tensor([[ 1., 10.,  0.,  1.],
        [20., 50., 20., 10.]], dtype=torch.float64)

初始阶段: phase_1_oxide
Phase 1 Oxide 最大迭代次数: 2
Phase 1 Organic 最大迭代次数: 2
目标总迭代次数: 10

================================================================================
当前阶段: phase_1_oxide
阶段迭代次数: 0
总迭代次数: 0/10
================================================================================
【INFO】Detected saturated Uniformity value: 0.9236, adding exploration encouragement
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 0.9443, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
迭代 0 完成
当前样本数: 5
超体积: 1.155844
总迭代次数: 0/10

================================================================================
当前阶段: phase_1_oxide
阶段迭代次数: 0
总迭代次数: 0/10
================================================================================

【INFO】Iteration 1, Phase phase_1_oxide, Subphase: N/A
【INFO】Objective Uniformity is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Coverage is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Adhesion is approaching saturation, adjusting reference point to 0.50
【DEBUG】Iteration 1: Running experiments...
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
迭代 1 完成
当前样本数: 10
超体积: 1.156032
总迭代次数: 1/10

================================================================================
当前阶段: phase_1_oxide
阶段迭代次数: 1
总迭代次数: 1/10
================================================================================

【INFO】Iteration 2, Phase phase_1_oxide, Subphase: N/A
【INFO】Objective Uniformity is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Coverage is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Adhesion is approaching saturation, adjusting reference point to 0.50
【DEBUG】Iteration 2: Running experiments...
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Uniformity value: 0.9889, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 0.9912, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Phase 1 Oxide 达到最大迭代次数 (2/2)，准备切换阶段
【DEBUG】准备切换阶段: phase_1_oxide -> ?
【INFO】切换到 Phase 1 Organic
【INFO】Using specified device: cpu
【INFO】Initialized TraceAwareKGOptimizer with device: cpu
【INFO】Parameter space: ['organic_formula', 'organic_concentration', 'organic_temperature', 'organic_soak_time', 'organic_ph', 'organic_curing_time']
【INFO】Bounds: tensor([[ 1.0000,  0.1000, 25.0000,  1.0000,  2.0000, 10.0000],
        [30.0000,  5.0000, 40.0000, 30.0000, 14.0000, 30.0000]],
       dtype=torch.float64)
【DEBUG】阶段切换完成: phase_1_oxide -> phase_1_organic
迭代 2 完成
当前样本数: 15
超体积: 1.157603
总迭代次数: 2/10

【阶段切换】phase_1_oxide -> phase_1_organic

================================================================================
当前阶段: phase_1_organic
阶段迭代次数: 0
总迭代次数: 2/10
================================================================================
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
迭代 0 完成
当前样本数: 5
超体积: 0.149874
总迭代次数: 2/10

================================================================================
当前阶段: phase_1_organic
阶段迭代次数: 0
总迭代次数: 2/10
================================================================================

【INFO】Iteration 1, Phase phase_1_organic, Subphase: N/A
【INFO】Objective Uniformity is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Adhesion is approaching saturation, adjusting reference point to 0.50
【DEBUG】Iteration 1: Running experiments...
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
迭代 1 完成
当前样本数: 10
超体积: 1.157625
总迭代次数: 3/10

================================================================================
当前阶段: phase_1_organic
阶段迭代次数: 1
总迭代次数: 3/10
================================================================================

【INFO】Iteration 2, Phase phase_1_organic, Subphase: N/A
【INFO】Objective Uniformity is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Coverage is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Adhesion is approaching saturation, adjusting reference point to 0.50
【DEBUG】Iteration 2: Running experiments...
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Phase 1 Organic 达到最大迭代次数 (2/2)，准备切换阶段
【DEBUG】准备切换阶段: phase_1_organic -> ?
【INFO】切换到 Phase 2
【INFO】从 Phase 1 Oxide 获取 2 个最优参数
【INFO】从 Phase 1 Organic 获取 1 个最优参数
【INFO】Using specified device: cpu
【INFO】Initialized TraceAwareKGOptimizer with device: cpu
【INFO】Parameter space: ['organic_formula', 'organic_concentration', 'organic_temperature', 'organic_soak_time', 'organic_ph', 'organic_curing_time', 'metal_a_type', 'metal_a_concentration', 'metal_b_type', 'metal_molar_ratio_b_a']
【INFO】Bounds: tensor([[ 1.0000,  0.1000, 25.0000,  1.0000,  2.0000, 10.0000,  1.0000, 10.0000,
          0.0000,  1.0000],
        [30.0000,  5.0000, 40.0000, 30.0000, 14.0000, 30.0000, 20.0000, 50.0000,
         20.0000, 10.0000]], dtype=torch.float64)
【INFO】Using specified device: cpu
【INFO】Initialized TraceAwareKGOptimizer with device: cpu
【INFO】Parameter space: ['organic_formula', 'organic_concentration', 'organic_temperature', 'organic_soak_time', 'organic_ph', 'organic_curing_time', 'metal_a_type', 'metal_a_concentration', 'metal_b_type', 'metal_molar_ratio_b_a']
【INFO】Bounds: tensor([[ 1.0000,  0.1000, 25.0000,  1.0000,  2.0000, 10.0000,  1.0000, 10.0000,
          0.0000,  1.0000],
        [30.0000,  5.0000, 40.0000, 30.0000, 14.0000, 30.0000, 20.0000, 50.0000,
         20.0000, 10.0000]], dtype=torch.float64)
【INFO】为 Phase 2 生成了 5 个组合初始样本
【INFO】Detected saturated Uniformity value: 0.9998, adding exploration encouragement
【INFO】Detected saturated Uniformity value: 0.9998, adding exploration encouragement
【INFO】Detected saturated Uniformity value: 0.9998, adding exploration encouragement
【INFO】Detected saturated Coverage value: 0.9992, adding exploration encouragement
【INFO】Detected saturated Coverage value: 0.9992, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Phase 2 初始样本已评估并保存，共 5 个样本
【DEBUG】阶段切换完成: phase_1_organic -> phase_2
迭代 2 完成
当前样本数: 15
超体积: 1.157625
总迭代次数: 4/10

【阶段切换】phase_1_organic -> phase_2
Phase 2 初始样本数: 5
Phase 2 初始样本参数形状: torch.Size([5, 10])
Phase 2 初始目标值形状: torch.Size([5, 3])

Phase 2 前3个初始样本参数:
  样本 1: [30.          3.10000005 35.         29.          8.5        20.
 20.         30.         15.          9.        ]
  样本 2: [30.          3.10000005 35.         29.          8.5        20.
 15.         30.          9.          9.        ]
  样本 3: [30.          3.10000005 35.         29.          8.5        20.
 15.         30.          9.          9.        ]

Phase 2 前3个初始样本目标值:
  样本 1: Uniformity=0.9500, Coverage=0.0000, Adhesion=0.9411
  样本 2: Uniformity=0.0000, Coverage=0.9500, Adhesion=0.9500
  样本 3: Uniformity=0.0000, Coverage=0.8959, Adhesion=0.9197

================================================================================
当前阶段: phase_2
阶段迭代次数: 0
总迭代次数: 4/10
================================================================================

【INFO】Iteration 1, Phase phase_2, Subphase: N/A
【INFO】Objective Uniformity is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Coverage is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Adhesion is approaching saturation, adjusting reference point to 0.50
【DEBUG】Iteration 1: Running experiments...
【INFO】Detected saturated Uniformity value: 0.9972, adding exploration encouragement
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
迭代 1 完成
当前样本数: 10
超体积: 0.298700
总迭代次数: 5/10

================================================================================
当前阶段: phase_2
阶段迭代次数: 1
总迭代次数: 5/10
================================================================================

【INFO】Iteration 2, Phase phase_2, Subphase: N/A
【INFO】Objective Uniformity is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Coverage is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Adhesion is approaching saturation, adjusting reference point to 0.50
【DEBUG】Iteration 2: Running experiments...
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 0.9809, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
迭代 2 完成
当前样本数: 15
超体积: 0.967711
总迭代次数: 6/10

================================================================================
当前阶段: phase_2
阶段迭代次数: 2
总迭代次数: 6/10
================================================================================

【INFO】Iteration 3, Phase phase_2, Subphase: N/A
【INFO】Objective Uniformity is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Coverage is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Adhesion is approaching saturation, adjusting reference point to 0.50
【DEBUG】Iteration 3: Running experiments...
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
迭代 3 完成
当前样本数: 20
超体积: 1.090977
总迭代次数: 7/10

================================================================================
当前阶段: phase_2
阶段迭代次数: 3
总迭代次数: 7/10
================================================================================

【INFO】Iteration 4, Phase phase_2, Subphase: N/A
【INFO】Objective Uniformity is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Coverage is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Adhesion is approaching saturation, adjusting reference point to 0.50
【DEBUG】Iteration 4: Running experiments...
【INFO】Detected saturated Uniformity value: 0.9311, adding exploration encouragement
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
迭代 4 完成
当前样本数: 25
超体积: 1.132766
总迭代次数: 8/10

================================================================================
当前阶段: phase_2
阶段迭代次数: 4
总迭代次数: 8/10
================================================================================

【INFO】Iteration 5, Phase phase_2, Subphase: N/A
【INFO】Objective Uniformity is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Coverage is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Adhesion is approaching saturation, adjusting reference point to 0.50
【DEBUG】Iteration 5: Running experiments...
【INFO】Detected saturated Uniformity value: 0.9611, adding exploration encouragement
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
迭代 5 完成
当前样本数: 30
超体积: 1.132766
总迭代次数: 9/10

================================================================================
当前阶段: phase_2
阶段迭代次数: 5
总迭代次数: 9/10
================================================================================

【INFO】Iteration 6, Phase phase_2, Subphase: N/A
【INFO】Objective Uniformity is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Coverage is approaching saturation, adjusting reference point to 0.50
【INFO】Objective Adhesion is approaching saturation, adjusting reference point to 0.50
【DEBUG】Iteration 6: Running experiments...
【INFO】Detected saturated Uniformity value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Uniformity value: 0.9222, adding exploration encouragement
【INFO】Detected saturated Uniformity value: 0.9739, adding exploration encouragement
【INFO】Detected saturated Uniformity value: 0.9162, adding exploration encouragement
【INFO】Detected saturated Coverage value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Coverage value: 0.9943, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
【INFO】Detected saturated Adhesion value: 1.0000, adding exploration encouragement
迭代 6 完成
当前样本数: 35
超体积: 1.147698
总迭代次数: 10/10

已达到目标总迭代次数 10（当前: 10），停止优化

================================================================================
=== 优化完成 ===
================================================================================
总迭代次数: 10/10

各阶段迭代次数:
  phase_1_oxide: 2 次
  phase_1_organic: 2 次
  phase_2: 6 次

各阶段样本数:
  phase_1_oxide: 15 个样本
  phase_1_organic: 15 个样本
  phase_2: 35 个样本

各阶段最优参数:

phase_1_oxide 帕累托前沿 (2 个解):
  解 1: 参数=[15. 30.  9.  9.], 目标值=[0.95       0.95       0.94114938]
  解 2: 参数=[20. 30. 15.  9.], 目标值=[0.94766407 0.95       0.95      ]

phase_1_organic 帕累托前沿 (1 个解):
  解 1: 参数=[30.          3.10000005 35.         29.          8.5        20.        ], 目标值=[0.95 0.95 0.95]

=== Optimization completed successfully! ===
Results saved to: /Users/fengxiaolong/Documents/待提交/金属化-LLM/Bayes_MFO/MetalBayes/data/output
Figures saved to: /Users/fengxiaolong/Documents/待提交/金属化-LLM/Bayes_MFO/MetalBayes/data/figures
